# Глава 2. Компоновка, упаковка, развертывание и администрирование приложений и типов

## Несколько слов о метаданных

Существуют три категории таблиц метаданных: определений, ссылок, манифестов.

Описание некоторых таблиц определений

| Имя таблицы | Описание |
| :--- | :--- |
| ModuleDef | Всегда содержит одну запись идентифицирующую модуля. Имя файла модуля с расширением и идентификатор версии модуля |
| TypeDef | Содержит по одной записи для каждого типа, определённого в модуле. Информация о типе и указатели на записи таблиц MethodDef, PropertyDef, EventDef |
| MethodDef | Содержит по одной записи для каждого метода, определённого в модуле. Информация о методе и смещение в модуле, по которому находится соответствующий IL-код. Каждая запись также может ссылаться на запись в таблице ParafDef |
| FieldDef | Содержит по одной записи для каждого поля, определённого в модуле |
| ParafDef | Содержит по одной записи для каждого параметра определённого в модуле |
| PropertyDef | Содержит по одной записи для каждого свойства, определённого в модуле. |
| EventDef | Содержит по одной записи для каждого события, определённого в модуле |

_**Похоже, что для каждого модуля будет свой набор таблиц**_

Компилятор генерирует записи в вышеуказанные таблицы. В ходе компиляции компилятор также обнаруживает типы, поля, метода, свойства, события, на которые имеются ссылки в исходном тексте. Все сведения о найденных сущностях регистрируются в таблицах ссылок.

Примеры некоторых таблиц ссылок

|  |  |
| :--- | :--- |
| AssemblyRef | Содержит по одной записи для каждой сборки, на которую есть ссылки в модуле. |
| ModuleRef | Содержит по одной записи для каждого PE-модуля, реализующего типы, на которые ссылается текущий модуль. Каждая запись включает имя файла сборки и его расширение. Эта таблица служит для привязки модуля вызывающей сборки к типам реализованным в других модулях. |
| TypeRef | Содержится по одной записи для каждого типа, на который ссылается текущий модуль. Каждая запись включает имя типа и ссылку по которой его можно найти. Если тип реализован в том же модуле, то ссылка на запись в ModuleDef, если в другом модуле, то на ModuleRef. Если тип в другой сборке, то ссылка на AssemblyRef |
| MemberRef | Содержится по одной записи для каждого члена типа, на который есть ссылка в модуле. |

### Таблицы Манифеста

Один из файлов сборки является файлов манифеста и содержит набор таблиц метаданных, которые в основном содержат имена файлов, составляющих сборку.

CLR работает всегда со сборками, сначала загружает файл манифеста, а затем из него получает имена остальных файлов сборки.

